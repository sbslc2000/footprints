# 설정 데이터 1 - 외부 파일
OS 환경 변수, 자바 시스템 속성, 커맨드 라인 옵션 인수는 사용해야하는 값이 늘어날 수록 사용하기가 불편해진다. 이에 대한 대안으로 설정값을 파일에 넣어서 관리할 수 있다.

![](https://i.imgur.com/rQA1pV0.png)

위 방법은 각각의 환경에 맞는 값을 가진 application.properties를 각각의 서버에 넣어두고, 애플리케이션 로딩 시점에 이 값들을 읽어서 외부 설정값으로 사용하는 방식이다.

## 스프링과 설정 데이터
스프링부트는 이 부분을 다 구현해두어서, 개발자는 application.properties라는 이름의 파일을 **자바를 실행하는 위치에 만들어주기만 하면** PropertySource에서 이를 읽어서 Environment에 넣어준다. 스프링에서는 이러한 파일을 설정 데이터*Config data*라고 한다.

![](https://i.imgur.com/57240gS.png)

하지만 이 경우 설정 파일이 각 서버에 분산되어 있어 관리가 어려워지는 문제가 있다. 또한 이 설정 파일은 git에 의해 이력이 추적되지 않기 때문에 변경 사항을 파악하기 어렵다.

# 설정 데이터2 - 내부 파일 분리
설정 파일을 외부에 관리하는 것은 상당히 번거롭다. 설정을 변경하기 위해서는 각각의 서버에 접속하여 변경사항을 수정해야하기 때문이다.

이 문제를 해결하는 간단한 방법은 설정 파일을 프로젝트 내부에 포함하여 관리하며 이를 빌드시점에 함께 적용되게 만드는 것이다. 이렇게 한다면 애플리케이션 배포 시점에 설정 파일을 변경사항도 함께 배포할 수 잇다.
![](https://i.imgur.com/24TT513.png)
이 경우 app.jar는 개발, 운영 두 설정파일을 모두 가지고 배포가 되며, 실행할 때 외부 설정을 통해 dev 혹은 prod 프로필을 넘겨주면 그에 맞는 설정파일을 읽어서 사용한다.

프로젝트 안에 설정 파일은 resources 폴더 하위에 넣으면 된다.

## 프로필
스프링은 프로필이라는 개념을 지원한다.
spring.profiles.active 외부 설정에 값을 넣으면 해당 프로필을 사용한다고 판단한다. 그리고 프로필에 따라서 다음과 같은 규칙으로 해당 프로필에 맞는 내부 파일(설정 데이터)를 조회한다.
`application-{prolfile}.properties`

ex)
`java -Dspring.profiles.active=dev -jar app.jar`
-> application-dev.properties를 설정 데이터로 사용
