# 1일 1 PS
 * 문제 이름 : 비슷한 단어
 * 링크 : https://www.acmicpc.net/problem/2179
반례를 못찾겠다.

# Spring Data JPA

## JpaRepository

SpringData JpaRepository를 사용하려면 @EnableJpaRepositories를 사용해야하지만, 스프링부트는 자동 설정해준다. 부트를 사용하지 않을 때는 @Configuration과 함께 사용해야한다.

JpaRepository의 구현체가 되는 SimpleJpaRepository에는 @Repository 애노테이션이 붙어있다. 인터페이스 레벨에서 @Repository를 붙이면 중복일 뿐이다.

스프링은 @Repository가 붙은 오브젝트에서 발생한 예외(SQLException, JPA관련 예외)를DataAccessException으로 변환해준다. 과거의 SQLException은 너무 많은 예외들의 내용을 하나의 Exception클래스에 담고 메시지를 통해 설명이 이루어졌기 때문에, 스프링은 예외를 분석하여 구체적인 예외를 되던져 준다. 하지만 최근에 Hibernate등의 기술들은 충분히 설명되어있는 exception을 반환하기도 한다.

## save 메서드
save는 2가지 용도로 사용할 수 있다.
1. Transient 상태 객체의 persist
	1. transient: 새로 만들어진 객체
2. Detached 상태 객체의 merge
	1. persistence context가 관리를 하는 상태에서 벗어난 상태
	2. merge는 detached 상태를 persist 상태로 변경
	3. 엔티티 상태 변화를 update 시킴
	4. insert가 발생할 수도 있다.

Transient 상태인지 Detached 상태인지 판단하는 기준은 @Id 프로퍼티이다. 이 값이 null이면 transient, null이 아닌 경우 detached로 판단한다.
```java
@Transactional  
@Override  
public <S extends T> S save(S entity) {  
  
    Assert.notNull(entity, "Entity must not be null");  
  
    if (entityInformation.isNew(entity)) {  
       entityManager.persist(entity);  
       return entity;  
    } else {  
       return entityManager.merge(entity);  
    }  
}
```

save를 통해 반환되는 엔티티는 무조건 영속화 상태의 객체이다. 반면 파라미터로 전달된 post가 영속된 상태인지는 persist, merge 여부에 따라 달라진다.