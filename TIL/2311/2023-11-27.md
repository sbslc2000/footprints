
```dataviewjs
dv.span("** ğŸ˜Š Tracker  ğŸ˜¥**") /* optional â¹ï¸ğŸ’¤âš¡âš ğŸ§©â†‘â†“â³ğŸ“”ğŸ’¾ğŸ“ğŸ“ğŸ”„ğŸ“ğŸ”€âŒ¨ï¸ğŸ•¸ï¸ğŸ“…ğŸ”âœ¨ */
const calendarData = {
    year: 2023,  // (optional) defaults to current year
    colors: {    // (optional) defaults to green
        blue:        ["#8cb9ff", "#69a3ff", "#428bff", "#1872ff", "#0058e2"], // first entry is considered default if supplied
        green:       ["#c6e48b", "#7bc96f", "#49af5d", "#2e8840", "#196127"],
        red:         ["#ff9e82", "#ff7b55", "#ff4d1a", "#e73400", "#bd2a00"],
        orange:      ["#ffa244", "#fd7f00", "#dd6f00", "#bf6000", "#9b4e00"],
        pink:        ["#ff96cb", "#ff70b8", "#ff3a9d", "#ee0077", "#c30062"],
        orangeToRed: ["#ffdf04", "#ffbe04", "#ff9a03", "#ff6d02", "#ff2c01"]
    },
    showCurrentDayBorder: true, // (optional) defaults to true
    defaultEntryIntensity: 1,   // (optional) defaults to 4
    intensityScaleStart: 0,    // (optional) defaults to lowest value passed to entries.intensity
    intensityScaleEnd: 3,     // (optional) defaults to highest value passed to entries.intensity
    entries: [],                // (required) populated in the DataviewJS loop below
}




//DataviewJS loop
for (let page of dv.pages('"TIL"').where(p => p.hello)) {
    //dv.span("<br>" + page.file.name) // uncomment for troubleshooting
    calendarData.entries.push({
        date: page.file.name,     // (required) Format YYYY-MM-DD
        intensity: page.hello, // (required) the data you want to track, will map color intensities automatically
        content: "",           // (optional) Add text to the date cell
        color: "green",          // (optional) Reference from *calendarData.colors*. If no color is supplied; colors[0] is used
        
    })
}

renderHeatmapCalendar(this.container, calendarData)
```

# Spring Data JPA
## Projection
ì¼ë¶€ë¶„ì— í•´ë‹¹í•˜ëŠ” ë°ì´í„°ë§Œ select í•  ìˆ˜ ìˆëŠ” ê¸°ìˆ 
ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ê³¼ í´ë˜ìŠ¤ ê¸°ë°˜ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆìœ¼ë©°, ì´ë“¤ì€ ê°ê° Open í”„ë¡œì ì…˜ ë°©ì‹ê³¼ Closed í”„ë¡œì ì…˜ ë°©ì‹ì´ ìˆë‹¤. **Open Projection**ì€ ì¼ë‹¨ ë‹¤ ê°€ì ¸ì˜¨ ì´í›„ ë³´ê³ ì‹¶ì€ ê²ƒë§Œ í•„í„°ë§í•˜ëŠ” ê²ƒì´ë©°, **Closed Projection**ì€ ìµœì´ˆì— ê°€ì ¸ì˜¬ ë•Œë¶€í„° í•„ìš”í•œ ì •ë³´ë§Œ ê°€ì ¸ì˜¤ëŠ” ê²ƒì´ë‹¤.
### ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ í”„ë¡œì ì…˜
* closed projection
ì•„ë˜ëŠ” ê´€ì‹¬ìˆëŠ” í•„ë“œì˜ ì •ë³´ë§Œì„ ê°€ì ¸ì˜¤ëŠ” ì¸í„°í˜ì´ìŠ¤ì´ë‹¤.
```java
public interface CommentSummary {
	String getComment();
	int getUp();
	int getDown();
}
```

```java
public interface CommentRepository extends JpaRepository<Comment,Long> {
	...
	List<CommentSummary> findByPost_id(Long id);
}
```
ì´ ê²½ìš° SQLë„ í•„ìš”í•œ ì»¬ëŸ¼ë§Œì„ ê°€ì ¸ì˜¤ë„ë¡ ë³€ê²½ëœë‹¤.

* open projection
ì•„ë˜ì²˜ëŸ¼ ì‚¬ìš©í•˜ë©´ ì¼ë‹¨ targetì— ëŒ€í•œ ì •ë³´ë¥¼ ê°€ì ¸ì™€ì•¼í•˜ê¸° ë•Œë¬¸ì— ëª¨ë“  ì»¬ëŸ¼ì„ ê°€ì ¸ì˜¤ê²Œ ëœë‹¤.
```java
public interface CommentSummary {
	String getComment();
	int getUp();
	int getDown();

	@Value("#{target.up ' ' + target.down}")
	String getVotes();
}
```

ìœ„ì™€ ê°™ì´ ì¡°í•©ëœ ì»¬ëŸ¼ì„ ì‚¬ìš©í•˜ë©´ì„œ closed projectionì„ í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ í•˜ë©´ ëœë‹¤.
```java
public interface CommentSummary {
	String getComment();
	int getUp();
	int getDown();

	String getVotes() {
		return getUp() + " " + getDown();
	}
}
```

### í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡œì ì…˜

* closed projection
```java
public class CommentSummary {
	private String comment;
	private int up;
	private int down;

	public CommentSummary(String comment, int up, int down) {
		this.comment = comment;
		this.up = up;
		this.down = down;
	}
	
	public String getComment();
	public int getUp();
	public int getDown();

	String getVotes() {
		return getUp() + " " + getDown();
	}
}
```

ì´ë ‡ê²Œ í•˜ë©´ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ì„œ closed projectionì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ì´ ë°©ì‹ì€ ì¸í„°í˜ì´ìŠ¤ì— ë¹„í•˜ì—¬ ë§ì€ ì½”ë“œê°€ ë“¤ì–´ê°€ëŠ” ë°˜ë©´ íš¨ê³¼ëŠ” ë™ì¼í•˜ë¯€ë¡œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì“°ëŠ” ê²ƒì´ ë” ë‚˜ì„ì§€ë„ ëª¨ë¥´ê² ë‹¤.

### ì—¬ëŸ¬ê°œì˜ íƒ€ì…ì„ ì²˜ë¦¬í•´ì•¼í•œë‹¤ë©´
ë§Œì•½ ì—¬ëŸ¬ê°œì˜ í´ë˜ìŠ¤(í˜¹ì€ ì¸í„°í˜ì´ìŠ¤)ë¥¼ ì²˜ë¦¬í•´ì•¼í•  ë•Œ ì–´ë–»ê²Œ í•˜ë©´ ì¢‹ì„ê¹Œ?
```java
public interface CommentRepository extends JpaRepository<Comment,Long> {
	...
	List<CommentSummary> findByPost_id(Long id);
	List<CommentOnly> findByPost_id(Long id); //compile error
}
```

ì´ë•ŒëŠ” Genericì„ ì‚¬ìš©í•˜ì—¬ ìœ ì—°í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤. -> **Dynamic Projection**
```java
public interface CommentRepository extends JpaRepository<Comment,Long> {
	...
	//ëŒ€ì‹  íŒŒë¼ë¯¸í„°ë¡œ íƒ€ì…ì„ ë„˜ê²¨ì•¼í•œë‹¤.
	<T> List<T> findByPost_id(Long id, Class<T> type);
}
```

## Specification
Specificationì€ DDD ì±…ì—ì„œ ì–¸ê¸‰ë˜ëŠ” ê°œë…ìœ¼ë¡œ Querydslì˜ Predicateì™€ ìœ ì‚¬í•˜ë‹¤.

### ì„¤ì •í•˜ëŠ” ë°©ë²•
* jpa-model-generator ì¶”ê°€

ì–´ìš° êµ¬ë²„ì „

## Query By Example
QBEëŠ” í•„ë“œ ì´ë¦„ì„ ì‘ì„±í•  í•„ìš” ì—†ì´ ë‹¨ìˆœí•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ë™ì ìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ ë§Œë“œëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ì‚¬ìš©ì ì¹œí™”ì ì¸ ì¿¼ë¦¬ ê¸°ìˆ ì…ë‹ˆë‹¤.

```java
Comment prove = new Comment();
prove.setBest(true);

//ê¸°ë³¸ì ìœ¼ë¡œëŠ” ëª¨ë“  í•„ë“œë¥¼ ë¹„êµí•˜ì—¬ ê°€ì ¸ì˜¤ì§€ë§Œ, ì—¬ëŸ¬ ë©”ì„œë“œë¥¼ í†µí•´ ì ìš©ë  í”„ë¡œí¼í‹°ë¥¼ í•œì •í•  ìˆ˜ ìˆë‹¤.
ExampleMatcher.matching()
	.withIncludeNullValues()
	.withMatcher("best", isTrue());

```

ë‹¨ì 
* í”„ë¡œí¼í‹° ê·¸ë£¹ì— ëŒ€í•œ ì œì•½ì¡°ê±´ì„ ë§Œë“¤ì§€ ëª»í•œë‹¤.
* ë²”ìœ„ ê°’ ì¡°íšŒë¥¼ í•˜ì§€ ëª»í•œë‹¤.

## Auditing
ì—”í‹°í‹°ì˜ ë³€í™”ê°€ ë‚˜íƒ€ë‚¬ì„ ë•Œ, ì´ê²ƒì´ ì–¸ì œ ëˆ„êµ¬ë¡œë¶€í„° ë³€ê²½ëëŠ”ì§€ ê¸°ë¡í•˜ëŠ” ë°©ë²•

```java
public class Comment {

	@CreatedAt
	private Date createdAt;

	@CreatedBy
	@ManyToOne
	private Account createdBy;

	@LastModifiedDate
	private Date createdAt;

	@LastModifiedBy
	@ManyToOne
	private Account createdBy;
}
```

Auditingì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì• ë…¸í…Œì´ì…˜ì„ ì‘ì„±í•´ì£¼ì–´ì•¼ í•œë‹¤.

```java
@SpringBootApplication
@EnableJpaAuditing
public class Application {
...
}
```

Entityì—ëŠ” AuditingListenerë¥¼ ì„¤ì •í•´ì£¼ì–´ì•¼ í•œë‹¤.
```java
@Entity
@EntityListeners(AuditingEntityListener.class)
public class Comment { ... }
```

ì´ì œ DateëŠ” ì•Œì•„ì„œ ê°±ì‹ ëœë‹¤. í•˜ì§€ë§Œ AccountëŠ” ì–´ë–»ê²Œ ì—…ë°ì´íŠ¸ì‹œì¼œì•¼ í• ê¹Œ?
Spring Securityë¥¼ ì‚¬ìš©í•˜ë©´ AuditAwareë¼ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ì—¬ ìˆ˜ì •,ìƒì„± ì‹œì˜ ì‚¬ìš©ìë¥¼ ë°˜í™˜í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
```java
public class AccountAuditAware implements AuditorAware<Account> {
	@Override
	public Optional<Account> getCurrentAuditor() {
		Authentication authentication = SecurityContextHolder.getContext().getAuthentication();

		return (MyUserDetails) authentication.getPrincipal().getUser();
	}
}
```

ì´ ê²½ìš° ë“±ë¡ëœ ë¹ˆì˜ ì´ë¦„ì„ ì„¤ì •ì—ì„œ ì œê³µí•´ì£¼ì–´ì•¼ í•œë‹¤.
```java
@SpringBootApplication
@EnableJpaAuditing(autidotorAwareRef = "accountAuditAware")
```


### Jpaì˜ Lifecycle Eventë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•
Jpa ì—”í‹°í‹°ì˜ lifecycle ê°„ì—ëŠ” ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ì—¬ ì½œë°± ë©”ì„œë“œë¥¼ ìˆ˜í–‰ì‹œí‚¬ ìˆ˜ ìˆë‹¤.

```java
@Entity 
class Post {

	@PrePersist
	public void prePersist() {
		this.createdAt = new Date();
		this.createdBy = //ThreadLocalì„ í†µí•´ ìœ ì € ê°€ì ¸ì˜¤ê¸°
	}
}
```

@PreUpdate, @PrePersist ë“±ì„ ì‚¬ìš©í•˜ì—¬ ìƒì„±ì‹œ, ìˆ˜ì •ì‹œ í•„ìš”í•œ ê°’ë“¤ì„ ë„£ì„ ìˆ˜ ìˆë‹¤. 

# Core Spring Security

# ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì˜ì¡´ì„± ì¶”ê°€ ì‹œ
ì„œë²„ê°€ ê¸°ë™ë˜ë©´ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì˜ ì´ˆê¸°í™” ì‘ì—… ë° ë³´ì•ˆ ì„¤ì •ì´ ì´ë£¨ì–´ì§„ë‹¤. 
ë³„ë„ì˜ ì„¤ì •ì´ë‚˜ êµ¬í˜„ì„ í•˜ì§€ ì•Šì•„ë„ ê¸°ë³¸ì ì¸ ì›¹ ë³´ì•ˆ ê¸°ëŠ¥ì´ í˜„ì¬ ì‹œìŠ¤í…œì— ì—°ë™ë˜ì–´ ì‘ë™í•œë‹¤.

1. ëª¨ë“  ìš”ì²­ì€ ì¸ì¦ì´ ë˜ì–´ì•¼ ìì›ì— ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.
2. ì¸ì¦ ë°©ì‹ì€ í¼ ë¡œê·¸ì¸ ë°©ì‹ê³¼ httpBasic ë¡œê·¸ì¸ ë°©ì‹ì„ ì œê³µí•œë‹¤.
3. ê¸°ë³¸ ë¡œê·¸ì¸ í˜ì´ì§€ë¥¼ ì œê³µí•œë‹¤.
4. ê¸°ë³¸ ê³„ì •ì„ í•œ ê°œ ì œê³µí•œë‹¤ : username: user, password: ëœë¤ ë¬¸ìì—´ (ì½˜ì†”ì— ì¶œë ¥)

ì´ ìƒíƒœë¡œëŠ” ê¸°ë³¸ì ì¸ ê¸°ëŠ¥ë§Œ ì œê³µë˜ê¸° ë•Œë¬¸ì—, ê³„ì • ì¶”ê°€, ê¶Œí•œ ì¶”ê°€, DB ì—°ë™ ë“± ë‹¤ì–‘í•œ ë” ì„¸ë¶€ì ì´ê³  ì¶”ê°€ì ì¸ ë³´ì•ˆ ê¸°ëŠ¥ì´ í•„ìš”í•˜ë‹¤.

## ì‚¬ìš©ì ì •ì˜ ë³´ì•ˆ ê¸°ëŠ¥ êµ¬í˜„

![](https://i.imgur.com/rkOUtiR.png)

ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì— ì˜ì¡´ì„±ì„ ì¶”ê°€í•˜ê³  ì„œë²„ë¥¼ êµ¬ë™í•˜ë©´ ì—¬ëŸ¬ ì›¹ ë³´ì•ˆ ê¸°ëŠ¥ì´ í™œì„±í™”ëœë‹¤. í•˜ì§€ë§Œ ê¸°ë³¸ ì„¤ì •ë§Œìœ¼ë¡œëŠ” ê¸°ë³¸ê³„ì • í•˜ë‚˜ë§Œì´ ì¡´ì¬í•˜ê³ , ì´ì— ëŒ€í•´ ë³„ë„ë¡œ ì¶”ê°€ëœ ê¶Œí•œì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤. ë˜í•œ ë³´ì•ˆ ìœ„í˜‘ì— ëŒ€í•´ì„œ ë°©ì§€í•˜ëŠ” ê¸°ëŠ¥ì´ ë¶€ì¬í•˜ë‹¤.

ë³´ì•ˆ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œëŠ” ì‚¬ìš©ì ì •ì˜ ë³´ì•ˆ ë‚´ìš©ë“¤ì„ ë‹´ì€ ì„¤ì • í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì•¼ í•˜ë©°, ì›¹ ë³´ì•ˆ ê¸°ëŠ¥ì´ ì‘ë™í•˜ê²Œ ì„¤ì •í•˜ê¸° ìœ„í•´ì„œëŠ” ì„¤ì • í´ë˜ìŠ¤ê°€ **WebSecurityConfigurerAdapter**ë¥¼ ìƒì†í•˜ê²Œ í•´ì•¼í•œë‹¤. 

WebSecurityConfigurerAdapterì€ **HttpSecurity**ë¥¼ ìƒì„±í•˜ë©°, HttpSecurityëŠ” ì„¸ë¶€ì ì¸ ë³´ì•ˆ ê¸°ëŠ¥ì„ ì„¤ì •í•  ìˆ˜ ìˆëŠ” APIë¥¼ ì œê³µí•œë‹¤. HttpSecurityì˜ ê¸°ëŠ¥ì€ í¬ê²Œ ì¸ì¦ ê¸°ëŠ¥ê³¼ ì¸ê°€ ê¸°ëŠ¥ì„ ë¶€ì—¬í•˜ëŠ” ì—¬ëŸ¬ APIë“¤ì„ ì œê³µí•œë‹¤.

## ì„¤ì • í´ë˜ìŠ¤
Spring Web MVCë¥¼ ì‚¬ìš©í•˜ë©´ì„œ Securityì˜ ê¸°ëŠ¥ì„ íš¨ê³¼ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” @EnableWebSecurity ì• ë…¸í…Œì´ì…˜ì„ ì„¤ì • í´ë˜ìŠ¤ì— ë¶€ì°©í•´ì•¼í•œë‹¤.
```java
@Configuration
@EnableWebSecurity 
public class SecurityConfig {
...
}
```

### @EnableWebSecurity 
```java
@Retention(RetentionPolicy.RUNTIME)  
@Target(ElementType.TYPE)  
@Documented  
@Import({ WebSecurityConfiguration.class, SpringWebMvcImportSelector.class, OAuth2ImportSelector.class,  
       HttpSecurityConfiguration.class })  
@EnableGlobalAuthentication  
public @interface EnableWebSecurity {  
  
    /**  
     * Controls debugging support for Spring Security. Default is false.     * @return if true, enables debug support with Spring Security  
     */    boolean debug() default false;  
  
}
```

@EnableWebSecurityë¥¼ í†µí•´ 4ê°€ì§€ì˜ ì„¤ì • í´ë˜ìŠ¤ê°€ ë“±ë¡ëœë‹¤.
* **WebSecurityConfiguration.class** : ì›¹ ê´€ë ¨ ë³´ì•ˆ ê¸°ëŠ¥ì„ ì§€ì›í•˜ëŠ” ê¸°ìˆ ì¸ HttpSecurity, SecurityFilterChain ë“±ì˜ ì •ë³´ë¥¼ êµ¬ì„±í•œë‹¤.
* **SpringWebMvcImportSelector.class** : DispatcherServletì´ í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ì¡´ì¬í•˜ëŠ” ê²½ìš° WebMvcSecurityConfigurationì„ ë“±ë¡í•œë‹¤.
* **OAuth2ImportSelector.class** : OAuth2ì™€ ê´€ë ¨ëœ êµ¬ì„±ì •ë³´ë¥¼ ë“±ë¡í•œë‹¤.
* **HttpSecurityConfiguration.class** : HttpSecurityì˜ êµ¬ì„±ì •ë³´ë¥¼ ë“±ë¡í•œë‹¤.

## HttpSecurity


# Username/Password Authentication
Spring SecurityëŠ” ì•„ì´ë””/íŒ¨ìŠ¤ì›Œë“œ ë°©ì‹ì˜ ì¸ì¦ ê¸°ëŠ¥ì„ ì§€ì›í•œë‹¤.

## Form Login ë°©ì‹
Spring SecurityëŠ” HTML formì„ í†µí•´ usernameê³¼ passwordë¥¼ ì œê³µë°›ëŠ” ì¸ì¦ ë°©ì‹ì„ ì œê³µí•œë‹¤.
![](https://i.imgur.com/JqKrBWf.png)

1. ì‚¬ìš©ìëŠ” ì¸ì¦ì´ í•„ìš”í•œ ìì›ì— ìš”ì²­í•œë‹¤.
2. Spring Securityì˜ `AuthorizationFilter`ì—ì„œ ì¸ì¦ë˜ì§€ ì•Šì€ ìš”ì²­ì€ ê±°ë¶€í•˜ê³  `AccessDeniedException`ì„ ë°œìƒì‹œí‚¨ë‹¤.
3. `ExceptionTranslationFilter`ì—ì„œ AuthenticationEntryPointì— ì§€ì •ëœ login pageë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ì‹œí‚¨ë‹¤. 
4. ì‚¬ìš©ìëŠ” ë¡œê·¸ì¸ í˜ì´ì§€ë¥¼ ìš”ì²­í•œë‹¤.
5. ì„œë²„ëŠ” ë¡œê·¸ì¸ í˜ì´ì§€ë¥¼ ë°˜í™˜í•œë‹¤.

usernameê³¼ passwordê°€ ì„œë²„ë¡œ ì „ë‹¬ë  ë•Œ, `UsernamePasswordAuthenticationFilter`ê°€ ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ì˜ ìœ íš¨ì„±ì„ ê²€ì¦í•œë‹¤. 

![](https://i.imgur.com/Z9KxOCe.png)

1. ì‚¬ìš©ìê°€ ì œì¶œí•œ usernameê³¼ passwordì„ í†µí•´ `UsernamePasswordAuthenticationFilter`ì—ì„œ  `UsernamePasswordAuthenticationToken`ì„ ìƒì„±í•œë‹¤. ì´ ì‘ì—…ì€ HttpRequestì—ì„œ usernameê³¼ passwordë¥¼ ì¶”ì¶œí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë™ì‘í•œë‹¤.
2. `UsernamePasswordAuthenticationToken`ì€ ì¸ì¦ì ˆì°¨ë¥¼ ê±°ì¹˜ê¸° ìœ„í•´ `AuthenticationManager`ë¡œ  ì „ë‹¬ëœë‹¤. AuthenticationManagerëŠ” ìœ ì € ì •ë³´ê°€ ì €ì¥ë˜ì–´ìˆëŠ” ë°©ì‹ì— ë”°ë¼ ë³€ê²½ë˜ì–´ì•¼ í•œë‹¤.
3. ì¸ì¦ì— ì‹¤íŒ¨í•˜ë©´, ë‹¤ìŒê³¼ ê°™ì€ ê³¼ì •ì„ ê±°ì¹œë‹¤.
	1. `SecurityContextHolder` ê°€ ë¹„ì›Œì§„ë‹¤.
	2. `RememberMeServices`ì˜ loginFailì´ ìˆ˜í–‰ëœë‹¤.
	3. `AuthenticationFailureHandler` ê°€ ìˆ˜í–‰ëœë‹¤.
4. ì¸ì¦ì— ì„±ê³µí•˜ë©´, ë‹¤ìŒê³¼ ê°™ì€ ê³¼ì •ì„ ê±°ì¹œë‹¤.
	1. `SessionAuthenticationStrategy`ì—ê²Œ ìƒˆë¡œìš´ ë¡œê·¸ì¸ì´ ë°œìƒí–ˆìŒì„ ì•Œë¦°ë‹¤.
	2. `RememberMeServices`ì˜ loginSuccessê°€ ìˆ˜í–‰ëœë‹¤. (optional)
	3. `ApplicationEventPublisher`ê°€ `InteractiveAuthenticationSuccessEvent`ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.
	4. `AuthenticationSuccessHandler`ê°€ ìˆ˜í–‰ëœë‹¤.

Form Loginì€ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì— ì˜í•´ ê¸°ë³¸ì ìœ¼ë¡œ ì„¤ì •ëœë‹¤. 

## SecurityFilterChain ì„¤ì •
```java
@Bean  
public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {  
    http.authorizeHttpRequests((authorize) -> authorize  
                    .anyRequest().authenticated()  
            ).formLogin(Customizer.withDefaults());  
  
    return http.build();  
}
```

authorizationHttpRequests ì´í›„ ì²´ì´ë‹ ë©”ì„œë“œë¥¼ í†µí•´ formLogin()ì„ í˜¸ì¶œí•˜ë©´ form login ë°©ì‹ì˜ ì¸ì¦ì´ ì ìš©ëœë‹¤. ì•„ë¬´ëŸ° ì‘ì„±ì„ í•˜ì§€ ì•Šì•„ë„ ê¸°ë³¸ê°’ìœ¼ë¡œ ì‘ë™í•˜ê¸´ í•œë‹¤.

## FormLoginConfigurer
Form Loginê³¼ ê´€ë ¨ëœ ì„¤ì •ì„ ì¶”ê°€ì ìœ¼ë¡œ ì œê³µí•˜ê¸° ìœ„í•´ì„œ FormLoginConfigurerì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. FormLoginConfigurerì€ formLoginì˜ ë©”ì„œë“œë¡œ ì œê³µí•˜ì—¬ ì ìš©ì‹œí‚¬ ìˆ˜ ìˆë‹¤.
```java
@Bean  
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {  
        http.authorizeHttpRequests((authorize) -> authorize  
                        .anyRequest().authenticated()  
                ).formLogin(form ->  form  
                    .loginPage("/login.html")  
                    .defaultSuccessUrl("/")  
                    .successForwardUrl("/")  
                    .failureUrl("/login?error")  
                    .usernameParameter("username")  
                    .passwordParameter("password")  
                    .loginProcessingUrl("/login")  
                    .successHandler((request, response, authentication) -> log.info("login success"))  
                    .failureHandler((request, response, exception) -> log.info("login fail"))  
                    .permitAll()  
                );  
                
        return http.build();  
    }
```
* loginPage: ì¸ì¦ì— í•„ìš”í•œ formì„ ë‹´ê³  ìˆëŠ” í˜ì´ì§€ë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤.
* defaultSuccessUrl : ë¡œê·¸ì¸ í›„ ì´ë™í•  urlì„ ì§€ì •í•´ì¤€ë‹¤. ë¡œê·¸ì¸ ìš”ì²­ ì´í›„ í´ë¼ì´ì–¸íŠ¸ëŠ” ì´ ì£¼ì†Œë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ëœë‹¤.
* successForwardUrl : ì‚¬ìš©ì´ ì œí•œì ì„. ì¶”í›„ ì‘ì„± ì˜ˆì • #todo
* failureUrl : ë¡œê·¸ì¸ ì‹¤íŒ¨ì‹œ ì´ë™í•  urlì„ ì§€ì •í•´ì¤€ë‹¤.
* usernameParameter : ë¡œê·¸ì¸ ì‹œ IDì— í•´ë‹¹í•˜ëŠ” í”„ë¡œí¼í‹° ëª…ì„ ë°”ê¿”ì¤„ ìˆ˜ ìˆë‹¤.
* passwordParameter : ë¡œê·¸ì¸ ì‹œ passwordì— í•´ë‹¹í•˜ëŠ” í”„ë¡œí¼í‹° ëª…ì„ ë°”ê¿”ì¤„ ìˆ˜ ìˆë‹¤.
* loginProcessingUrl : ë¡œê·¸ì¸ ë¡œì§ì„ ìˆ˜í–‰í•˜ëŠ” urlì„ ì§€ì •í•´ì¤€ë‹¤.
* successHandler : ë¡œê·¸ì¸ ì„±ê³µ ì‹œ ìˆ˜í–‰ë  ì½”ë“œë¥¼ ì‘ì„±í•´ì¤„ ìˆ˜ ìˆë‹¤.
* failureHandler : ë¡œê·¸ì¸ ì‹¤íŒ¨ ì‹œ ìˆ˜í–‰ë  ì½”ë“œë¥¼ ì‘ì„±í•´ì¤„ ìˆ˜ ìˆë‹¤.

### ì£¼ì˜í•  ì 
ì²´ì´ë‹ì„ í†µí•´ êµ¬ì„± ì •ë³´ë¥¼ ì œê³µí•  ë•Œ ìš°ì„ ìˆœìœ„ê°€ ìˆëŠ” ê²ƒ ê°™ë‹¤. ê°€ë ¹ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±ë˜ì–´ìˆë‹¤ë©´
```java
http.authorizeHttpRequests((authorize) -> authorize  
                        .anyRequest().authenticated()  
                ).formLogin(form ->  form  
                    .defaultSuccessUrl("/")  
                    .successHandler((request, response, authentication) ->  {  
                        response.sendRedirect("/home");  
                        log.info("login success");  
                    })  
                    .permitAll()  
                );
```
ë¡œê·¸ì¸ ì„±ê³µì‹œ defaultSuccessUrl ë¡œ ì´ë™í•˜ì§€ ì•Šê³  successHandlerì—ì„œ ì œê³µí•œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì£¼ì†Œë¡œ ì´ë™í•œë‹¤. 
[Form Login :: Spring Security](https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/form.html)
