# Rate Limiting
Rate Limiting은 시스템에 대한 어뷰징을 막거나 API 사용량을 제어하기 위해 **사용자가 특정 리소스에 접근하는 속도를 제어하는 기술**이다.

## Terminologie
제한과 관련된 용어.
* Limit: 정해진 시간 안에 허용될 요청의 수
* Window : 제한을 위한 시간 단위
* Identifier: 제한을 적용받는 식별자

응답에 대한 분류
* Blocking: 요청을 실패 처리
* Throttling: 요청 처리를 느리게 하거나, 퀄리티를 낮춘다.
* Shaping: 요청의 우선순위를 조정한다.

## 어디에 위치시켜야할까?
Rate Limiter은 애플리케이션과 멀 수도, 가까울 수도 있다.

CloudFlare, Nginx, API Gateway와 같은 기술에 Rate Limiting을 넣는다면 IP와 같은 정보를 기반으로 어뷰징 공격등을 막을 수 있지만, '글은 하루에 5번만 작성될 수 있다'와 같은 요구사항을 처리하지 못한다.

미들웨어, 라이브러리등으로 제공되는 Rate Limiter은 더 구체적인 비즈니스 문제를 해결하는데에 용이하지만, 어뷰징과 같은 공격들이 어플리케이션을 계속 hit하게 되는 문제가 발생한다.

요구사항에 따라서 결정하자.

## 상태 관리 이슈
Rate Limiter들이 파편화된 정보를 읽고 있다면 무용지물이 될 것이다. 따라서 중앙 상태 관리를 요구한다. 동시성 문제에 대응하여야 한다.

Rate Limiter은 주로 높은 처리량을 요구하기 때문에, LOCK 방식은 성능에 지장을 초래할지도 모른다. 원자적으로 값을 변경하는 방식을 사용하여야 한다. 또한 상황에 따라 중앙 관리로 감당이 안된다면 데이터 불일치를 감수하더라도 스케일링을 하는 의사결정도 고려해보아야 한다.




