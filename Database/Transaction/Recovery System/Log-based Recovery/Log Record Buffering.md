---
상위 개념: "[[Log-based Recovery]]"
---
# Log Record Buffering
일반적으로 로그 레코드 하나의 크기는 블록 크기에 비하여 매우 작으므로, 개별적으로 로그 레코드를 안정저장장치에 저장하는 것은 매우 큰 부하를 갖게 된다. 따라서 로그 레코드를 안정 저장 장치에 출력하기 전까지 메인 메모리 내에 로그 버퍼(log buffer)에 임시로 저장한다.

그러나 로그 버퍼링은 메인 메모리에 저장되기에 시스템 장애가 발생한다면 휘발될 수밖에 없다. 따라서 트랜잭션의 원자성을 보장하기 위해 복구 알고리즘에 다음과 같은 요구사항을 추가해야한다.

* <$T_i$, commit> 로그 레코드가 안정 저장 장치에 출력된 후에야 트랜잭션 $T_i$는 커밋 상태가 된다.
* <$T_i$, commit<> 로그 레코드가 안정 저장 장치로 출력되기 전에 $T_i$와 관련된 모든 로그 레코드는 안정 저장 장치에 출력되어야 한다.
* 메인 메모리 내의 갱신 내용을 포함하는 데이터 블록을 데이터베이스에 출력하기 전에, 데이터 블록에 포함된 데이터 항목과 관련된 모든 로그 레코드를 안정 저장 장치에 출력해야한다.

이러한 규칙을 쓰기 전 로깅(write-ahead logging,WAL)이라고 한다.