---
상위 개념: "[[Database]]"
---
# Buffer Manager
데이터베이스 시스템의 주요 목적은 디스크와 메모리 사이에 블록의 전송 수를 최소화하는 것이다. 이를 줄이는 한가지 방법은 메인 메모리에 가능한 한 많은 블록을 유지하는 것이다.

메인 메모리에 모든 블록을 유지하는 것은 불가능하므로 메인 메모리에서 블록을 저장하기 위해 이용할 수 있는 공간 할당을 관리할 필요가 있다. 이 공간을 '버퍼'라고 하며, 버퍼 공간의 할당을 책임지고 있는 DBMS의 서브시스템을 버퍼 관리자*Buffer Manager*라고 한다.

## 공유 및 독점적 잠금
버퍼 매니저가 어떠한 블록에 대한 읽기 혹은 쓰기를 수행할 때, 동시에 다른 프로세스의 버퍼 매니저가 해당 블록에 대해 읽기 혹은 쓰기를 수행한다면 문제가 발생할 수도 있다. 따라서 버퍼 매니저는 이에 대한 공유 및 독점적 잠금을 얻어야 한다.

* 블록의 대한 작업을 수행하기 전에 프로세스는 블록을 [핀](Pinned%20Block.md) 해야 한다. 잠금은 이후에 획득되며, 블록을 언핀하기 전에 잠금은 해제되어야 한다.
* 버퍼 블록을 읽기 전에 프로세스는 블록에 대한 **공유 잠금**을 얻어야 한다. 데이터 읽기가 완료되면 프로세스는 잠금을 해제한다.
	* 공유 잠금은 여러 프로세스로부터 동시에 획득될 수 있다.
* 버퍼 블록을 갱신하기 전에 프로세스는 블록에 대한 **독점적 잠금**을 얻어야 한다. 갱신이 완료된 이후 프로세스는 잠금을 해제한다.
	* 독점적 잠금을 얻기 위해서는 어떠한 공유 잠금과 독점적 잠금도 없어야한다. 또한 독점적 잠금을 얻고 나면, 어떤 다른 프로세스도 해당 블록에 대한 공유 잠금이나 독점적 잠금을 얻을 수 없다.