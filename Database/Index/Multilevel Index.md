---
상위 개념: "[[Index]]"
---
# Multilevel Index
4KB 블록에 100개의 인덱스 엔트리를 저장할 수 있다고 가정할 때, 1,000,000개의 튜플에 대한 밀집 인덱스는10,000개의 블록으로 구성된다. 만약 인덱스가 메인 메모리에 모두 유지할 수 없을 정도로 크다면, 인덱스에서 엔트리를 찾는 작업을 위해 여러개의 블록을 읽어야 한다. 위 경우 이진 탐색을 수행하더라도 14번의 디스크 블록 읽기를 수행해야한다. 또한 이는 모두 비순차적 I/O 연산일 가능성이 높다.

![](https://i.imgur.com/ErD5dwL.png)

이런 문제를 해결하기 위해 인덱스를 순차파일로 취급하여 그 위에 희소 인덱스를 구성할 수 있다. 이 때 원래의 인덱스를 내부 인덱스라고 하며, **내부 인덱스**에 대한 인덱스를 **외부 인덱스**라고 한다. 원하는 키값을 찾기 위해서는 먼저 외부 인덱스에서 이진 탐색을 통해 원하는 레코드가 존재하는 내부 인덱스를 찾고, 이후 해당 내부 인덱스를 읽어 레코드의 위치를 찾는다.

10,000개의 블록을 가진 내부 인덱스를 가리키는 외부 인덱스는 100개의 블록으로 구성된다. 외부 인덱스가 메인 메모리에 이미 있다고 가정하면 데이터를 읽기 위해서는 2번의 디스크 읽기만을 수행하여 데이터를 가져올 수 있다. 

이러한 인덱스의 계층 구조는 필요한 만큼 여러 계층을 가지게 만들 수 있다. 이 처럼 두 개 혹은 그 이상의 계층을 갖는 인덱스를 다계층 인덱스*multilevel index*라고 한다.
