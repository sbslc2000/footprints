---
상위 개념: "[[Routing Algorithm]]"
---
# Link State Algorithm
링크 상태 알고리즘(Link State Algorithm, LS)은 중앙 집중형 라우팅 알고리즘이다. 최소 비용 경로를 찾는데에는 [다익스트라 알고리즘](../../../Algorithm/Graph/Shortest%20Path/Dijkstra%20Algorithm.md)이 사용된다.

## Link-state broadcast
링크 상태 알고리즘은 네트워크 토폴로지와 모든 링크 비용이 알려져 있어서 링크들의 상태를 입력값으로 하여 알고리즘을 수행한다. 이 정보는 어떻게 얻어질 수 있을까?

이를 지원하기 위하여 각 노드는 자신과 직접 연결된 링크의 식별자와 비용 정보를 담은 링크 상태 패킷(link-state packet, LSP)을 네트워크상의 다른 모든 노드로 브로드캐스트하게 함으로써 가능하다. 이를 통해 각 노드는 네트워크에 대한 동일하고 완벽한 관점을 가지고 알고리즘을 수행할 수 있다.

## 진동 상태와 해결법
![](https://i.imgur.com/9pPdoT2.png)
트래픽의 양을 링크 비용으로 산정하는 경우 [진동 문제](Oscillation%20Problem)가 발생할 수 있다.

위 그림에서 z와 x는 w로 1의 트래픽을 전송한다. 라우터 e는 e 만큼의 트래픽을 w로 전송해야한다. 초기의 라우터 e는 w로 트래픽을 전송하는데에 z를 경유하든 x를 경유하든 차이가 없다. a.initial routing은 x로 보내는 경로를 채택한 초기 라우팅 상태를 표현한다.

이 때 y와 x에서 알고리즘을 수행하면 다음과 같은 새로운 경로가 반영된다.
* y는 w까지 데이터를 보내는 두 방법 중 x를 경유하는 경로는 비용이 1 + e 이고, z를 경유하는 경로는 비용이 1임을 확인한다. 따라서 y는 z에게 트래픽을 전송하도록 경로 변경이 발생한다.
* x는 w까지 데이터를 보내는데에 직접 연결된 경로는 1 + e의 비용을, y-z를 경유하는 경로는 1의 비용을 갖는 것을 확인한다. 따라서 x는 y-z를 경유하여 w로 데이터를 보내기로 결정한다.

이 과정을 거치면 위 그림의 b 상태가 된다. 이후 각 노드들에서 다시 한번 링크 상태 알고리즘이 수행된다면, z -> y -> x -> w , 즉 반시계방향의 링크들이 모두 비용이 0임을 확인하고, 해당 경로로 변경될 수 있다.

즉 링크 상태 알고리즘이 여러번 수행될 때 최적의 상태에 머무르지 못하고 시계 방향과 반시계 방향을 번갈아가며 사용하는 상황이 발생한다. 이를 진동 문제라고 한다.

진동 문제를 해결하기 위한 첫번째 방법은 **링크 비용이 해당 링크가 전달하는 트래픽의 양에 의존하지 않도록 하는 방법**이다. 하지만 이는 라우팅의 근본 목적을 회피하므로 채택하기 어려운 해결책이다.

다른 해결책으로는 **모든 라우터가 동시에 링크 상태 알고리즘을 실행하지 못하도록 하는 방법**이 있다. 이는 링크 상태 정보를 송신하고 알고리즘을 수행하는 시각을 임의로 결정하게 만들게 하여 구현할 수 있다.