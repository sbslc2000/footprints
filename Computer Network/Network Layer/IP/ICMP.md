---
상위 링크: "[[Internetworking Protocol]]"
---
# Internet Control Message Protocol
![](https://i.imgur.com/7AgvTdg.png)

IP는 서로 다른 네트워크를 표준화하자는 목적에서 설계된 프로토콜이어서, 기능이 단순하고 헤더의 크기가 작다. 따라서 이를 용이하게 제어하기가 어렵다. (Ex. 패킷 손실을 감지하지 않음, 목적지까지 경로 정보를 직접 확인하거나 제어할 수 없음) ICMP는 **IP의 동작을 보조하기 위한 제어 프로토콜**로, IP와는 별도의 프로토콜이지만 논리적으로는 IP의 부가 기능처럼 동작한다. 

이는 일종의 out-of-band 기법으로, 데이터와 컨트롤을 분리함으로써 이들을 독립적으로 발전할 수 있게 해준다.

## 제어 작업

ICMP는 목적지에서 항상 송신자에게 응답을 보낸다.

`ping`은 ICMP를 사용하며, 목적지에 패킷이 도착한 이후, 송신자와 수신자를 뒤바꾸어 ICMP 패킷을 새로 송신한다. 이를 통해 네트워크를 진단할 수 있다.

또한 ICMP는 IP 패킷이 버려지는 경우 송신자에게 해당 상황을 알린다. 
* TTL 초과
* 체크섬 실패
* 재조립 실패
* 단편화 할 수 없음
이 때에는 IP가 버려지는 해당 라우터를 송신자로 하고 기존의 송신자를 수신자로 하는 패킷을 만들어 전송한다. 이 패킷에는 왜 버려졌는지와, 버려진 패킷의 헤더가 포함된 채로 전송된다. 이는 최초 송신자에게 네트워크 상황을 진단할 수 있는 힌트로써 사용될 수 있다.