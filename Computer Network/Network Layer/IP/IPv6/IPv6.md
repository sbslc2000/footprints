---
상위 링크: "[[IP]]"
---
# IPv6
IPv6은 IPv4의 주소 고갈 문제에 기인하여 개발되었다. IPv6의 개발은 IPv4의 축적된 운용 경험에 근거하여 IPv4의 다른 면을 확장하고 축소하는 기회가 되었다.

## IPv6 Header
IPv4의 많은 필드가 생략되거나 옵션으로 남겨졌다 (e.g., Fragmentation, checksum). 40 byte의 고정 길이 헤더는 라우터가 IP 데이터그램을 더 빨리 처리하게 해준다.
![](https://i.imgur.com/uFdIcwl.png)

### 확장된 주소 기능
주소 크기를 기존 32비트에서 128비트로 확장했다. 이는 행성의 모든 모래알마저도 IP주소로 나타낼 수 있는 수준이다. 또한 유니캐스트, 멀티캐스트 뿐만 아니라 새로운 주소 형태인 애니캐스트(anycast address)가 도입되었다. 애니캐스트 주소로 명시된 데이터그램은 호스트 그룹의 어떠한 이에게든 전달될 수 있다.

### Traffic class
IPv4의 TOS와 비슷한 의미로 만들었으며, SMTP 이메일 같은 애플리케이션의 데이터그램보다 VoIP 같은 특정 애플리케이션 데이터그램에 우선순위를 부여하는데에 사용된다.

### Payload Length
고정 길이 40 바이트 패킷 헤더 뒤에 나오는 페이로드 길이를 표현한다.

### Next Header
디멀티플렉싱키로, 데이터그램의 데이터 필드가 전달될 프로토콜을 구분한다.

### Hop limit
IPv4의 TTL 필드와 동일하다. 라우터각 데이터그램을 전달할 때 마다 1 씩 감소한다.


## 사라진 Framentation, Checksum, Option
네트워크 라우터의 IP 패킷 처리 속도는 주요한 관심이 되었고, IPv4에 존재하지만 IPv6에서 사라진 헤더들은 이러한 이유에서 사라졌다.

IPv6에는 단편화-재결합 작업을 오직 출발지와 목적지에서 수행한다. 라우터가 패킷을 단편화하는 작업은 시간이 걸리는 일이기 때문이다.

Checksum 역시 처리를 요하는 일이기에 사라졌다. 이더넷과 트랜스포트 계층 프로토콜이 체크섬을 수행하므로 IP에서는 생략해도 될 것이라는 판단하에 이러한 결정이 이루어졌다.

옵션 필드는 IPv6에서 'Next Header'를 사용하는 방식으로 구현되었다. 이는 헤더를 고정길이로 구성하게 만들어 최적화에 용이하다.

## IPv4에서 IPv6로 전환
IPv6을 지원하는 신규 라우터는 IPv4역시 지원하지만, IPv4를 지원하는 옛 라우터들은 IPv6을 지원하지 못한다. 이는 IPv6로의 전환을 막는 가장 큰 요소이다.

첫번째 전환법은 플래그 데이(flag day)를 선언하는 것이다. 모든 인터넷 장비들이 약속된 한날 한시에 IPv6을 지원할 수 있도록 업그레이드하는 방법이다. 하지만 오늘 날 수억 개의 장비를 한순간에 변경하는 것은 상상조차 할 수 없는 일이다.


![](https://i.imgur.com/TIAdX2k.png)

실제로 널리 사용되는 방법은 터널링(tunneling)이다. 터널링은 VPN 등 기술에서도 사용되는 기술이다. IPv6 라우터들 사이에 있는 IPv4 라우터들을 터널로 취급하여, 터널의 송신측에 있는 IPv6 노드는 IPv6 데이터그램을 받을 때 IPv4의 데이터그램의 페이로드 필드에 이것을 넣는다. 이 IPv4 데이터그램의 목적지 주소는 터널의 수신측 IPv6 라우터의 주소로 설정하여 이를 터널로 전송한다.





%% 
## 주요 특징
* 128-bit 주소
* 멀티캐스트
* 실시간 서비스 대비
* 인증 및 기밀
	* 인증 : 패킷이 변질되지 않았음을 확인하는 행위
	* 기밀  : 암호화
* [DHCP](DHCP.md)나 ARP에 의존하지 않는 자동구성
* 종단간 단편화
* 프로토콜 확장


 %%