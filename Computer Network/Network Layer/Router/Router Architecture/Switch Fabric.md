---
상위 개념: "[[Router Architecture]]"
---
# Switch Fabric
스위치 구조(Switch Fabric)는 라우터의 입력 포트와 출력 포트를 연결한다. 패킷이 입력 포트에서 출력 포트로 실제로 스위칭(포워딩)되므로 이는 라우터의 핵심이다. 아래와 같이 여러가지 방법으로 스위칭을 수행할 수 있다.
![](https://i.imgur.com/cI19n8i.png)

## Memory
![](https://i.imgur.com/pe2Qnx9.png)


가장 단순한 초기의 라우터는 CPU(라우팅 프로세서)를 직접 제어해서 입력 포트와 출력 포트 사이에서 패킷을 스위칭하는 전통적인 컴퓨터다. 입력 포트와 출력 포트는 전통적인 운영체제에서의 전통적인 I/O 장치처럼 작동한다.

패킷이 도착하면 입력 포트는 라우팅 프로세서에게 인터럽트를 보내 패킷을 프로세서 메모리에 복사한다. 그런 다음 라우팅 프로세서는 헤더에서 목적지 주소를 추출하고 포워딩 테이블에서 적절한 출력 포트를 찾은 다음 패킷을 출력 포트의 버퍼에 복사한다.

이 방법의 한계는 메모리 대역폭에 의해 패킷 포워딩 처리량이 제한된다는 것이다. 만약 메모리 대역폭이 초 당 B 패킷을 읽거나 쓸 수 있다면, 전체 포워딩 처리량은 초 당 B/2 미만이 된다. 또한, 공유 시스템 버스를 통해 한 번에 하나의 메모리 읽기/쓰기 작업만 가능하기 때문에, 서로 다른 목적지 포트로 향하는 패킷이라도 동시에 포워딩 할 수 없다.

## Bus
![](https://i.imgur.com/ttBjr5P.png)


버스를 통환 교환 방식에서 입력 포트는 라우팅 프로세서의 개입 없이 공유 버스를 통해 직접 출력 포트로 패킷을 전송한다. 이는 일반적으로 미리 준비된 입력 포트 스위치 내부 레이블(헤더)이 로컬 출력 포트를 나타내는 패킷에 전송되거나 버스에 패킷을 전송하여 수행된다.

동시에 여러 패킷이 다른 입력 포트에 있는 라우터에 도착하면, 한 번에 하나의 패킷만 버스를 통과할 수 있기 때문에 하나를 제외한 모든 패킷이 대기해야한다.

## Interconnection Network
![](https://i.imgur.com/D6klIvJ.png)

공유 버스의 대역폭 제한을 극복하는 한 가지 방법은 상호연결 네트워크(Interconnection Network)를 사용하는 것이다. 

크로스바 스위치(crossbar switch)는 N개의 입력 포트를 N개의 출력 포트에 연결하는 2N개의 버스로 구성된 상호연결 네트워크이다. 각 수직 버스는 교차점에서 각 수평 버스와 교차하며, 스위치 구조 컨트롤러에 의해 언제든지 열거나 닫을 수 있다.

위 그림에서 A에서 Y로 패킷이 포워딩 중이라고 하자. 이 때 스위치 컨트롤러가 교차점을 닫기에, B에서 X로 동시에 패킷을 출력할 수 있다. 단, 2개의 서로 다른 입력 포트에서 나오는 2개의 패킷이 동일한 출력 포트로 보내지는 경우 한 번에 하나의 패킷만 특정 버스에서 전송될 수 있기 때문에 입력을 기다려야 한다.