---
상위 개념: "[[TCP]]"
---
# TCP Congestion Control
TCP는 혼잡한 네트워크 상황에서는 전송 속도를 줄이고, 혼잡하지 않다면 전송 속도를 늘리는 매커니즘을 가지고 있다. 이러한 서비스는 IP 레이어에서 제공되지 않기 때문에, **종단 간의 혼잡 제어 서비스**라고 불린다.

## 기본 원리

### 어떻게 네트워크 혼잡을 감지하는가?
TCP는 전송 계층 프로토콜로, 그 아래 계층인 IP는 패킷 손실이나 지연에 대한 명시적인 피드백을 제공하지 않는다. 따라서 TCP는 스스로 네트워크의 혼잡 상태를 유추해야 한다.

* RTT(Round-Trip Time)의 증가는 중간 라우터의 큐에 패킷이 쌓이고 있다는 신호이며, 이는 네트워크가 혼잡해지고 있음을 나타낸다.
* 패킷 손실이 발생하는 경우 라우터에서 패킷이 버려지는 경우이므로 네트워크가 혼잡하다는 것을 의미한다.

TCP는 직간접적으로 위 요소를 모두 사용하여 혼잡 제어를 수행한다. 또한, 패킷 손실에 대해서는 더 상세한 케이스 별로 혼잡 제어를 수행한다.

* Timeout이 발생하는 경우
* 3개의 중복된 ACK이 발생하는 경우

전송한 여러 세그먼트들이 모두 손실되는 경우, Timeout이 발생한다. 이는 네트워크가 매우 혼잡함을 의미한다. 이런 상황에서는 적극적으로 전송 속도를 줄일 필요가 있다.

3개의 중복된 ACK은 세그먼트들 중 하나의 패킷이 손실된 경우이다. TCP는 [Cumulative ACK](../../../reliable%20transmission/Cumulative%20ACK.md)을 사용하므로, 전송 세그먼트 [A, B, C, D, E, F]에서 D가 손실되는 경우 송신자가 받게되는 ACK은 [B, C, D, D, D, D]가 된다. 이렇게 3개의 중복 ACK이 발생하는 경우는 Timeout보다는 네트워크 혼잡도가 적다는 것을 시사하므로, 비교적 소극적으로 전송 속도를 줄일 필요가 있다.

### 어떻게 전송 속도를 조절하는가?

## TCP Congestion Control 
