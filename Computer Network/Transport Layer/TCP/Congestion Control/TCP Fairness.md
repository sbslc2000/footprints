---
상위 개념: "[[TCP Congestion Control]]"
---
# TCP Fairness
![](https://i.imgur.com/cbstNkF.png)
서로 다른 TCP 연결이 용량이 R인 병목 라우터를 지난다고 하자. 각 연결이 R/2의 전송을 사용하게 되면 링크 대역폭을 동등하게 공유하는 것이 된다.

서로 다른 TCP 연결들이 서로 다른 시점에서 시작하고, 주어진 시점에서 다른 윈도 크기를 갖는다고 했을 때, TCP의 AIMD 알고리즘은 공평한가?

![](https://i.imgur.com/IqbBqQw.png)


TCP의 AIMD 혼잡 제어 알고리즘이 공평한지를 평가할 때, 두 개의 연결이 공유하는 링크를 가정하여 분석할 수 있다. 위 그림은 두 연결이 사용하는 대역폭을 좌표평면에 표현한 것이다. x축은 첫 번째 연결의 처리량, y축은 두 번째 연결의 처리량을 나타낸다. R은 링크의 전체 대역폭이다.

대각선으로 그려진 Full bandwidth utilization line은 링크 대역폭이 완전히 사용되고 있음을 의미한다. 이 선 위에 위치하는 지점은 두 연결의 처리량 합이 링크의 최대 대역폭 R에 도달했음을 의미한다. 또 다른 대각선인 Equal bandwidth share 선은 두 연결이 공평하게 대역폭을 사용하는 경우를 나타낸다.

AIMD는 혼잡 신호가 발생하지 않는 동안에는 각 연결의 윈도우 크기를 동일한 속도로 선형 증가시킨다. 이 과정은 그림에서 대각선 방향으로 위로 이동하는 선으로 표현된다. 반면, 패킷 손실 등으로 혼잡이 감지되면 각 연결은 자신의 윈도우 크기를 절반으로 줄인다. 이 감소는 현재 위치에서 원점 방향으로 기울기 1:1인 선을 따라 이동하는 것으로 표현된다.

그림에서 A, B, C, D는 두 연결의 윈도우 크기 변화 과정을 보여준다. AIMD 알고리즘은 시간이 지날수록 이러한 반복을 통해 시스템을 full bandwidth utilization 선으로 수렴시키고, 공평한 대역폭 분배선을 중심으로 점차 균형을 찾아간다. 초기 위치가 어디든 반복적인 AIMD 동작을 거치면 두 연결은 점점 공평한 상태로 수렴하게 된다. 이를 통해 AIMD는 장기적으로 공평성을 보장한다고 말할 수 있다.