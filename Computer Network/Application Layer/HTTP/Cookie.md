---
상위 개념: "[[../../../WEB/HTTP/HTTP|HTTP]]"
---
# Cookie
HTTP 서버는 무상태성을 갖는다. 이는 서버의 설계를 간단하게 만들고, 동시에 여러개의 TCP 연결을 다룰 수 있는 고성능의 웹 서버를 만들 수 있게 해주는 기반이 된다. 하지만, 서버가 사용자의 접속을 제한하거나 사용자에 따른 콘텐츠를 제공하는 것이 바람직할 때가 존재한다. 이 목적으로 HTTP는 Cookie \[RFC 6265]를 사용한다.

## 동작 원리
![](https://i.imgur.com/ak3Tes3.png)

사용자는 Amazon 웹 서버에 처음으로 접근한다. 이후 Amazon 웹서버는 해당 HTTP 요청에 Cookie 값이 없음을 확인하고, 새로운 사용자로 인식한다. 해당 사용자의 ID (위 예제에서 1678)를 만들어 엔트리에 저장한 뒤, HTTP 응답에 `Set-cookie: 1678`을 담아 전송한다.

브라우저가 HTTP 응답을 받았을 때 `Set-cookie` 헤더가 존재한다면 브라우저가 관리하는 파일에 이를 저장한다. 사용자가 다음번 Amazon 웹서버에 접속할 때에는 파일에서 이를 가져와 `cookie: 1678`이라는 헤더를 HTTP 요청에 담아 전송한다.

Amazon 웹 서버는 Cookie 값을 확인하여, 기존에 접속 이력이 있는 사용자임을 인식한다. 이후 해당 식별자를 통해 서버의 정보와 조합하여 컨텐츠를 제공한다.